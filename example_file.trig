## Metamodeling prefixes (models that describe models):
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .


# The Knowledge Graph Map Ontology (KGMO) is a novel way to note relationships
# observationally and inductively and without triggering OWL semantics.
# Publication venue and date TBD.
@prefix kgmo: <http://purl.org/twc/kgmo/>.

## Whyis support prefixes:
@prefix np: <http://www.nanopub.org/nschema#>.
@prefix whyis: <http://vocab.rpi.edu/whyis/> .
@prefix prov: <http://www.w3.org/ns/prov#>.
@prefix mediatype: <https://www.iana.org/assignments/media-types/>.
@prefix dcterms: <http://purl.org/dc/terms/>.

# For pv:File:
@prefix pv: <http://purl.org/net/provenance/ns#>.
# For ov:hasContentType:
@prefix ov: <http://open.vocab.org/terms/> .

## Media-specifc prefixes:
# Note that ActivityStreams supercedes schema.org when available.
# properties for the as: namespace are recorded here:
# https://www.w3.org/TR/activitystreams-vocabulary
@prefix as: <https://www.w3.org/ns/activitystreams#> .
@prefix schema: <http://schema.org/> .

## Domain prefixes:
# Wikidata is for instances and classes:
@prefix wd: <http://www.wikidata.org/entity/> .
# SIO is for relationships between instances:
@prefix sio: <htttp://semanticscience.org/resource/>.

## ARCLIGHT-specific prefixes:
@prefix file: <http://purl.org/arclight/file/> .
@prefix user: <http://purl.org/arclight/user/> .
@prefix action: <http://purl.org/arclight/action/> .
@prefix entity: <http://purl.org/arclight/entity/> .
@prefix tool: <http://purl.org/arclight/tool/> .
@prefix image: <http://purl.org/arclight/image/> .
@prefix exif: <http://purl.org/arclight/exif/> .

# Ontology terms for things like models and activities.
@prefix ao: <http://purl.org/arclight/ontology/> .

# Nanopublication URIs live here:
@prefix pub: <http://purl.org/arclight/pub/> .

# Initial upload/post by Jay using the Whyis fediverse UI:
pub:550e8400-e29b-41d4-a716-446655440000_head {
  pub:550e8400-e29b-41d4-a716-446655440000 a np:Nanopublication;
    np:hasAssertion pub:550e8400-e29b-41d4-a716-446655440000_assertion;
    np:hasProvenance pub:550e8400-e29b-41d4-a716-446655440000_provenance;
    np:hasPublicationInfo pub:550e8400-e29b-41d4-a716-446655440000_pubinfo.

  pub:550e8400-e29b-41d4-a716-446655440000_assertion a np:Assertion.
  pub:550e8400-e29b-41d4-a716-446655440000_provenance a np:Provenance.
  pub:550e8400-e29b-41d4-a716-446655440000_pubinfo a np:PublicationInfo.
}
pub:550e8400-e29b-41d4-a716-446655440000_assertion {
  file:550e8400-e29b-41d4-a716-446655440000
      a schema:ImageObject, pv:File,
        <https://www.iana.org/assignments/media-types/image>, # automatic
        <https://www.iana.org/assignments/media-types/image/png>; # automatic
      ov:hasContentType "application/png" ; # automatic
      ov:fileSize 1048576 ;  # automatic, TODO
      ov:hasChecksum "abc123" ;  # automatic, TODO
      dcterms:created "2023-10-30-21T12:34:56Z"^^xsd:dateTime ; # automatic
      # ARCLIGHT ID, not really needed since we have the URI itself.
      dcterms:identifier "550e8400-e29b-41d4-a716-446655440000" .
}
pub:550e8400-e29b-41d4-a716-446655440000_provenance {
  # This is empty, although maybe we put something like the checksum here?
}
pub:550e8400-e29b-41d4-a716-446655440000_pubinfo {

  # We are conflating nanopublications and ActivityPub objects
  # because they're similar "content containers".
  # We link to the image itself in here, provide attribution for
  # the artifact, and find alignment between the ActivityPub-level
  # information artifact provenance and what Whyis already does.
  pub:550e8400-e29b-41d4-a716-446655440000 a as:Image ;
      as:name "A Flamingo!" ;
      as:url file:550e8400-e29b-41d4-a716-446655440000;
      as:attributedTo user:millerj;
      as:published "2023-10-30-21T12:34:56Z"^^xsd:dateTime.

  pub:550e8400-e29b-41d4-a716-446655440000
      dcterms:created "2023-10-30-21T12:34:56Z"^^xsd:dateTime; # automatic
      dcterms:creator user:millerj. # automatic

  # Note that this would actually be recorded in a user profile,
  # we don't need to repeat any of this in individual pubs.
  user:millerj a as:Person ;
      as:name "Jay Miller" ;
      schema:email <mailto:jay.miller@bostonfusion.com> .
}

# These are actually all generated by agents (either real or simulated),
# so they get their own nanopublications.

# Note that I removed Douglas Adams (Q42) from the mix because he probably
# doesn't look much like a flamingo, but also he's a specific person and not
# a class, so wouldn't be detected by current models, mostly because they
# don't know what he looks like. We want to identify the principle object as
# an instance of flamingo.

pub:665e8400-e29b-41d4-a716-446655441111_head {
  pub:665e8400-e29b-41d4-a716-446655441111 a np:Nanopublication;
    np:hasAssertion pub:665e8400-e29b-41d4-a716-446655441111_assertion;
    np:hasProvenance pub:665e8400-e29b-41d4-a716-446655441111_provenance;
    np:hasPublicationInfo pub:665e8400-e29b-41d4-a716-446655441111_pubinfo.

  pub:665e8400-e29b-41d4-a716-446655441111_assertion a np:Assertion.
  pub:665e8400-e29b-41d4-a716-446655441111_provenance a np:Provenance.
  pub:665e8400-e29b-41d4-a716-446655441111_pubinfo a np:PublicationInfo.
}
pub:665e8400-e29b-41d4-a716-446655441111_assertion {

  file:550e8400-e29b-41d4-a716-446655440000
    schema:hasPart file:550e8400-e29b-41d4-a716-446655440000_1.

  file:550e8400-e29b-41d4-a716-446655440000_1
      a schema:ImageObject, pv:File,
        <https://www.iana.org/assignments/media-types/image>, # automatic
        <https://www.iana.org/assignments/media-types/image/png>; # automatic
      ao:hasBoundingBox "50,20,300,200" ;
      ov:hasContentType "application/png" ; # automatic
      schema:about entity:555447de-7c27-43dd-9cd7-7696c2ff49fa.

  entity:555447de-7c27-43dd-9cd7-7696c2ff49fa a wd:Q488383 # Wikidata Object.

}
pub:665e8400-e29b-41d4-a716-446655441111_provenance {
  pub:665e8400-e29b-41d4-a716-446655441111_assertion sio:hasAttribute [
    a sio:Probability;
    sio:hasValue 0.78;
  ].
}

pub:665e8400-e29b-41d4-a716-446655441111_pubinfo {
  file:550e8400-e29b-41d4-a716-446655440000_1
      prov:wasGeneratedBy action:665e8400-e29b-41d4-a716-446655441111.

  pub:665e8400-e29b-41d4-a716-446655441111
      prov:wasGeneratedBy action:665e8400-e29b-41d4-a716-446655441111; # automatic
      prov:wasDerivedFrom pub:550e8400-e29b-41d4-a716-446655440000; # automatic
      dcterms:created "2023-10-30-21T12:34:56Z"^^xsd:dateTime; # automatic
  .

  action:665e8400-e29b-41d4-a716-446655441111 a ao:ObjectDetection ; # added from agent.activity_type
      prov:used file:550e8400-e29b-41d4-a716-446655440000.
}

## Next another agent performs the classification of the entity
## in the constrained bounding box:

pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_head {
  pub:78c9b455-ee4a-4598-a812-4dd01bb9399a a np:Nanopublication;
    np:hasAssertion pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_assertion;
    np:hasProvenance pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_provenance;
    np:hasPublicationInfo pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_pubinfo.

  pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_assertion a np:Assertion.
  pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_provenance a np:Provenance.
  pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_pubinfo a np:PublicationInfo.
}
pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_assertion {

  entity:555447de-7c27-43dd-9cd7-7696c2ff49fa a wd:Q7512165. # flamingo (order)

}
pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_provenance {
  pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_assertion sio:hasAttribute [
    a sio:Probability;
    sio:hasValue 0.83;
  ].
}

pub:78c9b455-ee4a-4598-a812-4dd01bb9399a_pubinfo {
  pub:78c9b455-ee4a-4598-a812-4dd01bb9399a
      prov:wasGeneratedBy action:78c9b455-ee4a-4598-a812-4dd01bb9399a; # automatic
      prov:wasDerivedFrom pub:665e8400-e29b-41d4-a716-446655441111; # automatic
      dcterms:created "2023-10-30-21T12:34:56Z"^^xsd:dateTime; # automatic
  .

  action:78c9b455-ee4a-4598-a812-4dd01bb9399a a ao:ObjectDetection ;# added from agent.activity_type
      prov:used file:550e8400-e29b-41d4-a716-446655440000_1.
}
